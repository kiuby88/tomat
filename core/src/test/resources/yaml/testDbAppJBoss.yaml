name: DatabaseApp
id: dbApp
location: localhost
services:
- serviceType: brooklyn.entity.webapp.jboss.JBoss7Server
  name: JBoss Main Web Server
  location: AWS
  id: JBossMainWebServer
  brooklyn.config:
    java.sysprops:
      brooklyn.example.db.url: $brooklyn:formatString("jdbc:%s%s?user=%s\&password=%s", component("MainMySql").attributeWhenReady("datastore.url"), "dbName", "dbUser", "seaclouds")
    wars.root: webAppArtifactImplementation.war
    port.http: 80+
- serviceType: brooklyn.entity.database.mysql.MySqlNode
  name: MainMySQL
  location: localhost
  id: MainMySql
  brooklyn.config:
    datastore.creation.script.url: database.sql
